var urlDomain="";
var urlEnv="/"+window.location.pathname.split("/")[1];
function environmentDomain(){switch(true){case window.location.pathname.split("/")[1].indexOf("stg")!==-1:urlDomain="https://marketing-api.creditrepair.stg";
break;
case window.location.pathname.split("/")[1].indexOf("test")!==-1:urlDomain="https://marketing-api.creditrepair.test";
break;
default:urlDomain="https://marketing-api.creditrepair.com";
break
}}function isEmpty(a){if(a==="undefined"||a===""||a===undefined||a===null||a==="null"){return true
}return Object.keys({obj:a}).length===0
}var startTime,currentTime;
function setTimeStamp(){if(!isEmpty(sessionStorage.getItem("sessionTimeStamp"))){startTime=new Date(sessionStorage.sessionTimeStamp)
}else{sessionStorage.sessionTimeStamp=new Date();
startTime=new Date(sessionStorage.sessionTimeStamp)
}}function checkTimeStamp(){setTimeStamp();
currentTime=new Date();
var a=currentTime-startTime;
a/=1000*60;
sessionStorage.sessionTimer=Math.round(a)+" minutes";
if(parseInt(a)>60){$(".overlay-modal .modal-content").html("<h2>Session Timed Out.</h2><a href='"+urlEnv+"' style='margin: 5px auto; display: block;max-width: 110px' class='modal-button'>Start Over</a>");
$(".overlay-modal").addClass("open");
$("a.modal-button").on("click",function(){sessionStorage.clear()
});
return false
}return true
}function stepOneCompleted(){if(isEmpty(sessionStorage.getItem("step1Completed"))){$(".overlay-modal .modal-box").html("<h2>Oops! Something went wrong.</h2><a href='"+urlEnv+"' style='margin: 5px auto; display: block;max-width: 110px' class='modal-button'>Start Over</a>");
$(".overlay-modal").addClass("open");
$("a.modal-button").on("click",function(){window.location.replace(urlEnv)
});
$(".modal-box").css("display","inline-block");
return false
}return true
}function loadingAnimStart(b){var a=b.attr("name")==="sign-up-modal"?".modal-box":"#signup-v2";
setTimeout(function(){b.hide("slow");
$(a+" .loading").addClass("start");
$("p.loading-text-box").css({display:"inline-block"}).find("span").addClass("activate");
$(a+" .text-anim").addClass("activate")
},100);
setTimeout(function(){if(b.attr("name")==="sign-up-modal"&&window.location.pathname.split("/")[2]!=="report-load"){$(".submit_button_wrap").show();
$(".overlay-modal").addClass("open")
}},500)
}function loadingAnimFinished(c,b){var a=b.attr("name")==="sign-up-modal"?".modal-box":"#signup-v2";
if(c==="error"){setTimeout(function(){$(a+" .loading").removeClass("start");
$("p.loading-text-box").css({display:"none"}).find("span").removeClass("activate");
$(a+" .text-anim").removeClass("activate");
$(a+" .error-boundaries").addClass("appear");
$(a+" .error-box").addClass("appear");
$(a+" .error").addClass("appear")
},100);
setTimeout(function(){$(a+" .error-boundaries").removeClass("appear");
$(a+" .error-box").removeClass("appear");
$(a+" .error").removeClass("appear");
b.show("slow")
},2500)
}else{setTimeout(function(){$(a+" .loading").removeClass("start");
$("p.loading-text-box").css({display:"none"});
$(a+" .text-anim").removeClass("activate");
$(a+" .check-boundaries").addClass("appear");
$(a+" .box").addClass("appear");
$(a+" .check").addClass("appear")
},100)
}}$("input, select, textarea").on("focus blur",function(){$("meta[name=viewport]").attr("content","width=device-width,initial-scale=1,maximum-scale=1")
});
$(document).ready(function(){$(this).scrollTop(0);
environmentDomain()
});
var technicalError=[0,1,2,17,18,19,115,121,139,203,204,205,206,207,214,215,221,231,236,237,241,242,252,254,256,257,261,262,263,264,265,271,272,281,282,283,284,285,299,300,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,331,332,333,334,336,339,340,352,354,355,356,357,358,359,364,365,366,367,368,372,374,381,382,444,459,500,502];
function callMsg(d,e,b,c){var a=findLogs();
e=d?e+"FFHD":e;
a[e]={successFail:c};
a[e]={response:b}
}function storeLogs(a){if(!isEmpty(sessionStorage.getItem("logs"))){sessionStorage.logs=JSON.stringify(Object.assign(a,JSON.parse(sessionStorage.logs)))
}else{sessionStorage.logs=JSON.stringify(a)
}}function findLogs(){switch(window.location.pathname){case urlEnv:return $step1;
case urlEnv+"/step-2":return $step2;
case urlEnv+"/step-3":return $step3;
case urlEnv+"/security-questions":return $securityQuestions;
default:return""
}}sessionStorage.attemptAPI=!isEmpty(sessionStorage.getItem("attemptAPI"))?parseInt(sessionStorage.getItem("attemptAPI")):0;
var kbaTries=0;
function errorRedirect(g,f,d){sessionStorage.removeItem("errorCode");
sessionStorage.removeItem("errorCodeFFHD");
f=f||false;
storeLogs(findLogs());
var e=0,a="";
if(g.status!==0){if(!isEmpty(typeof g.exception)){e=parseInt(g.exception.errorCode.slice(-3));
f?sessionStorage.errorCodeFFHD=e:sessionStorage.errorCode=e
}else{if(!isEmpty(typeof g.response)){e=parseInt(g.response.exception.errorCode.slice(-3));
f?sessionStorage.errorCodeFFHD=e:sessionStorage.errorCode=e
}else{if(!isEmpty(typeof g.responseJSON)){e=parseInt(g.responseJSON.exception.errorCode.slice(-3));
f?sessionStorage.errorCodeFFHD=e:sessionStorage.errorCode=e
}else{e=parseInt(g.status);
f?sessionStorage.errorCodeFFHD=e:sessionStorage.errorCode=e
}}}}else{if(parseInt(sessionStorage.attemptAPI)>1){e=parseInt(g.status);
f?sessionStorage.errorCodeFFHD=e:sessionStorage.errorCode=e
}else{e=362;
f?sessionStorage.errorCodeFFHD=e:sessionStorage.errorCode=e;
sessionStorage.attemptAPI=parseInt(sessionStorage.attemptAPI)+1
}}if(window.location.pathname===urlEnv+"/step-3"&&(e===502||e===500)){if(isEmpty(sessionStorage.getItem("primaryUserFinished"))){_satellite.track("parallel_legal_agreement_button")
}else{_satellite.track("parallel_legal_agreement_button_ffhd")
}window.location.replace(urlEnv+"/security-questions")
}else{if(window.location.pathname===urlEnv+"/report-load"&&(e===502||e===500||e===1)){reportReady=true
}else{if(window.location.pathname===urlEnv||window.location.pathname===urlEnv+"/step-2"&&(e===110)){}else{if(window.location.pathname===urlEnv&&e===1){inputErrorHandling(f?$("input#Email-ffhd"):$("input#Email"),false,"Email is not valid!")
}else{if(technicalError.indexOf(e)>=0){window.location.replace(urlEnv+"/errors")
}else{if(e===123){if(kbaTries<2){kbaTries+=1;
$(window).scrollTop(0);
a="<h2 style='max-width: 400px;margin: 15px auto;'>Incorrect answers provided, please review & resubmit</h2>";
modalInfo(a,"Retry");
if(!isEmpty(sessionStorage.primaryUserFinished)&&sessionStorage.primaryUserFinished==="true"){callForQuestions(true)
}else{callForQuestions(false)
}}else{loadingAnimStart($("button[name='security-questions-submit']"));
if(!isEmpty(sessionStorage.primaryUserFinished)&&sessionStorage.primaryUserFinished==="true"){_satellite.track("parallel_kba_failed_ffhd")
}else{_satellite.track("parallel_kba_failed")
}window.location.replace(urlEnv+"/errors")
}}else{if(e===118){if(isEmpty(sessionStorage.getItem("primaryUserFinished"))){_satellite.track("parallel_kba_questions")
}else{_satellite.track("parallel_kba_questions_ffhd")
}if(!isEmpty(sessionStorage.getItem("FFHDiscount"))&&sessionStorage.getItem("FFHDiscount")==="true"&&isEmpty(sessionStorage.getItem("primaryUserFinished"))){sessionStorage.primaryUserFinished=true;
window.location.href=urlEnv+"/step-3"
}else{finalizeSale()
}}else{if(e===124){if(!isEmpty(sessionStorage.getItem("FFHDiscount"))&&sessionStorage.getItem("FFHDiscount")==="true"&&isEmpty(sessionStorage.getItem("primaryUserFinished"))){sessionStorage.primaryUserFinished=true;
window.location.href=urlEnv+"/step-3"
}else{if(!isEmpty(sessionStorage.primaryUserFinished)&&sessionStorage.primaryUserFinished==="true"){_satellite.track("parallel_kba_failed_ffhd")
}else{_satellite.track("parallel_kba_failed")
}window.location.replace(urlEnv+"/errors")
}}else{if(e===125){if(!isEmpty(sessionStorage.getItem("FFHDiscount"))&&sessionStorage.getItem("FFHDiscount")==="true"&&isEmpty(sessionStorage.getItem("primaryUserFinished"))){sessionStorage.primaryUserFinished=true;
window.location.href=urlEnv+"/step-3"
}else{finalizeSale()
}}else{if(e===202){window.location.replace(urlEnv)
}else{if(e===213){inputErrorHandling(f?$("input#Email-ffhd"):$("input#Email"),false,"Email is not valid!")
}else{if(e===234){a="<h2 style='max-width: 400px;margin: 15px auto;'>The date of birth seems to be invalid, please review & resubmit</h2>";
modalInfo(a,"Close");
$("button[name='sign-up-modal']").on("click",function(){$(".overlay-modal").removeClass("open")
})
}else{if(e===242||e===305){a="<h2 style='max-width: 400px;margin: 15px auto;'>One or more of the following answers does not match what is on file. Please review & resubmit</h2>";
modalInfo(a,"Close");
$("button[name='sign-up-modal']").on("click",function(){$(".overlay-modal").removeClass("open")
})
}else{if(e===253){window.location.replace(urlEnv+"/errors?error=error-3")
}else{if(e===266){if(window.location.pathname===urlEnv+"/step-4"){window.location.replace(urlEnv+"/errors")
}else{if(window.location.pathname===urlEnv+"/step-2"){window.location.replace(urlEnv+"/step-3")
}}}else{if(e===318){window.location.replace(urlEnv+"/errors?error=error-3")
}else{if(e===327){a="<h2>Oops! Something went wrong.</h2>";
modalInfo(a,"Start Over");
$("button[name='sign-up-modal']").on("click",function(){window.location.replace(urlEnv)
})
}else{if(e===338){if((!isEmpty(sessionStorage.getItem("FFHDiscount"))&&sessionStorage.getItem("FFHDiscount")==="true"&&!f)){d=true
}else{window.location.replace(urlEnv+"/step-3")
}}else{if(e===342||e===448){if(parseInt(sessionStorage.attemptAPI)>1){window.location.replace(urlEnv+"/errors")
}else{sessionStorage.attemptAPI=parseInt(sessionStorage.attemptAPI)+1;
$(".overlay-modal .modal-content").html("<h2>Oops! Something went wrong. Let's Try Again.</h2><a class='sign-up-button'>Reload</a>");
$(".overlay-modal").addClass("open");
$("a.sign-up-button").on("click",function(){window.location.reload()
})
}}else{if(e===343){if(kbaTries<2){kbaTries+=1;
a="<h2>The card information you provided is invalid. Please provide a valid form of payment</h2>";
modalInfo(a,"Close");
$("button[name='sign-up-modal']").on("click",function(){$(".overlay-modal").removeClass("open")
})
}else{window.location.replace(urlEnv+"/errors")
}}else{if(e===361||e===362){a="<h2>Oops! Something went wrong.</h2>";
modalInfo(a,"Start Over");
$("button[name='sign-up-modal']").on("click",function(){window.location.replace(urlEnv)
})
}else{if(e===16){a="<h2 style='max-width: 400px;margin: 15px auto;'>The username is unavailable, please review & resubmit</h2><a href='/login' style='margin: 15px auto; display: block; max-width: 10px' class='modal-button'>Login</a>";
modalInfo(a,"Close");
$("button[name='sign-up-modal']").on("click",function(){$(".overlay-modal").removeClass("open")
})
}else{if(e===373||e===375){a="<h2>Your account already exists, <br>please select from the following:</h2><a href='tel:1-844-290-5950' style='margin: 5px auto; display: block;max-width: 230px' class='modal-button'>Call Now: 1-844-290-5950</a>";
modalInfo(a,"Login");
$("button[name='sign-up-modal']").on("click",function(){window.location.replace("/login")
})
}else{if(e===387){a="<h2>Step 2 was not completed correctly, <br>please try again:</h2>";
modalInfo(a,"Step 2");
$("button[name='sign-up-modal']").on("click",function(){window.location.replace(urlEnv+"/step-2")
})
}else{if(e===439){a="<h2>The card information you provided is invalid. Please provide a valid form of payment</h2>";
modalInfo(a,"Close");
$("button[name='sign-up-modal']").on("click",function(){$(".overlay-modal").removeClass("open")
})
}else{if(e===440){if((!isEmpty(sessionStorage.getItem("FFHDiscount"))&&sessionStorage.getItem("FFHDiscount")==="true"&&!f)){d=true
}else{window.location.replace(urlEnv+"/step-3")
}}else{if(e===273||e===353||e===441||e===442){if(window.location.pathname===urlEnv+"/step-2"){a="<h2>The billing information you provided does not match. Please validate your billing and card information, and resubmit</h2>";
modalInfo(a,"Close");
if(e===353){var b=f?$("#cc_exp-ffhd"):$("#cc_exp");
b.parent().removeClass("field_pass");
b.parent().addClass("field_error");
b.attr("aria-invalid","true").removeClass("is-valid").addClass("is-invalid");
b.siblings("em").text("Please validate info")
}else{var c=f?$("#cc_exp-ffhd, #cc_num_0-ffhd, #cc_cvv-ffhd"):$("#cc_exp, #cc_num_0, #cc_cvv");
c.parent().removeClass("field_pass");
c.parent().addClass("field_error");
c.attr("aria-invalid","true").removeClass("is-valid").addClass("is-invalid");
c.siblings("em").text("Please validate info")
}$("button[name='sign-up-modal']").on("click",function(){$(".overlay-modal").removeClass("open")
})
}else{window.location.replace(urlEnv+"/errors")
}}else{if(e===383){if(parseInt(sessionStorage.attemptAPI)>1){window.location.replace(urlEnv+"/errors")
}else{reportReady();
sessionStorage.attemptAPI=parseInt(sessionStorage.attemptAPI)+1
}}else{if(e===471||e===472||e===474||e===475||e===477||e===476){window.location.replace(urlEnv+"/errors?error=no-report")
}else{window.location.replace(urlEnv+"/errors")
}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}function errorScroll(a,b){if(!b){$("html, body").animate({scrollTop:a.offset().top-200},500);
$(".errors").html('<span class="errors-icon">!</span>There are errors on the '+a.next().text()+" Field")
}else{$(".errors").hide("slow")
}}function inputErrorHandling(a,b,c){if(!b){a.parent().removeClass("field_pass");
a.parent().addClass("field_error");
a.attr("aria-invalid","true").removeClass("is-valid").addClass("is-invalid");
a.siblings("em").html(c);
errorScroll(a,b);
return false
}else{a.parent().removeClass("field_error");
a.parent().addClass("field_pass");
a.attr("aria-invalid","false").removeClass("is-invalid").addClass("is-valid");
a.siblings("em").html("");
errorScroll(a,b);
return true
}}function finalizeSale(){var a=(!isEmpty(sessionStorage.getItem("FFHDiscount"))&&sessionStorage.getItem("FFHDiscount")==="true");
$(".modal-content").hide("slow").html("<h2>Finalizing <span style='font-weight: 700'>"+(a?sessionStorage.fullName+" & "+sessionStorage.fullNameFFHD:sessionStorage.fullName)+"'s</span> Account</h2>").show("slow");
loadingAnimStart($("button[name='sign-up-modal']"));
$.ajax({async:true,type:"POST",dataType:"json",contentType:"application/json",xhrFields:{withCredentials:true},headers:{isParallelSignUp:a},url:urlDomain+"/marketing-services/signup/v3/finalizeSale",crossDomain:true,success:function(b){if(b.status){callMsg(false,"finalizeAPI",b,"Success: Registration Complete!");
loadingAnimFinished("success",$("button[name='sign-up-modal']"));
if(a){_satellite.track("parallel_signup_finalize_button");
_satellite.track("parallel_signup_finalize_button_ffhd")
}else{_satellite.track("parallel_signup_finalize_button")
}storeLogs(findLogs());
setTimeout(function(){window.location.href=urlEnv+"/report-load"
},2000)
}else{callMsg(false,"finalizeAPI",b,"Error: Registration Failed");
loadingAnimFinished("error",$("button[name='sign-up-modal']"));
errorRedirect(b,a)
}},error:function(b){callMsg(false,"finalizeAPI",b,"Error: Registration Failed");
loadingAnimFinished("error",$("button[name='sign-up-modal']"));
errorRedirect(b,a)
}})
}function passiveFlag(b){var a={isAuthorized:true};
$.ajax({async:true,type:"POST",dataType:"json",xhrFields:{withCredentials:true},headers:{isSecondaryUser:b},data:JSON.stringify(a),contentType:"application/json",url:urlDomain+"/marketing-services/signup/v3/authorization",crossDomain:true,success:function(c){if(c.status){callMsg(false,"passiveFlagAPI",c,"Success: Credit Reports Authorized");
if(b){_satellite.track("parallel_signup_experian_report_ffhd")
}else{_satellite.track("parallel_signup_experian_report")
}sessionStorage.authorizedAlready=true
}else{callMsg(false,"passiveFlagAPI",c,"Failed: Credit Reports Authorized");
loadingAnimFinished("error",$("button[name='sign-up-modal']"));
errorRedirect(c,b)
}},error:function(c){callMsg(false,"passiveFlagAPI",c,"Failed: Credit Reports Authorized");
loadingAnimFinished("error",$("button[name='sign-up-modal']"));
errorRedirect(c,b)
},complete:function(){loadingAnimFinished("success",$("button[name='sign-up-modal']"))
}})
}function modalInfo(b,a){$(".modal-content").html(b);
$(".overlay-modal").addClass("open");
setTimeout(function(){$(".modal-box .submit_button_wrap").show().find("button").text(a).show()
},2500)
}function experianFlag(){$(".modal-box").css("padding","20px 40px");
var a="<h2>We're excited to start working on "+(!isEmpty(sessionStorage.primaryUserFinished)&&sessionStorage.primaryUserFinished==="true"?"both of your credits":"your credit")+'</h2>\n             <p>First, you need to authorize CreditRepair.com to access\n                your credit report in order to provide you the service.</p>\n            <p>Please confirm your authorization to access your credit\n                report for authentication and your own review by\n                clicking "Get My Credit Reports"</p>';
modalInfo(a,"Get My Credit Reports");
$("button[name='sign-up-modal']").on("click",function(){loadingAnimStart($(this));
if(isEmpty(sessionStorage.authorizedAlready)){if(!isEmpty(sessionStorage.primaryUserFinished)&&sessionStorage.primaryUserFinished==="true"){passiveFlag(false);
passiveFlag(true)
}else{passiveFlag(false)
}}setTimeout(function(){$(".full-sized .loading").removeClass("start");
$("#signup-v2").css("opacity","1").css("height","auto");
$(".overlay-modal").removeClass("open")
},100);
reportReady();
$(".progress-bar-loader").ProgressLoader();
$("#progress-bar-box, #build-profile, #progress-info-box").addClass("activate")
})
};